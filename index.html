<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Phantom DApp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    button {
      padding: 12px 24px;
      font-size: 16px;
      margin: 12px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Phantom DApp</h1>

  <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –î–ï–°–ö–¢–û–ü–ê -->
  <button onclick="connectDesktop()">üíª –ü–æ–¥–∫–ª—é—á–∏—Ç—å Phantom (–¥–µ—Å–∫—Ç–æ–ø)</button>

  <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ú–û–ë–ò–õ–¨–ù–û–ì–û Phantom -->
  <button onclick="openInPhantomApp()">üì± –ü–æ–¥–∫–ª—é—á–∏—Ç—å Phantom (–º–æ–±–∏–ª—å–Ω—ã–π)</button>

  <script>
    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ –¥–µ—Å–∫—Ç–æ–ø–µ
    async function connectDesktop() {
      const provider = window.solana;

      if (!provider || !provider.isPhantom) {
        alert("Phantom –Ω–µ –Ω–∞–π–¥–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ Phantom.");
        return;
      }

      try {
        const resp = await provider.connect();
        alert("–ö–æ—à–µ–ª–µ–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω: " + resp.publicKey.toString());
      } catch (err) {
        alert("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: " + err.message);
      }
    }

    // –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–∞–π—Ç–∞ –≤ Phantom App (–º–æ–±–∏–ª—å–Ω—ã–π)
    function openInPhantomApp() {
      const dappUrl = encodeURIComponent("https://dimer101.github.io/phantom_test0/");
      const phantomDeepLink = `https://phantom.app/ul/browse?ref=${dappUrl}`;
      window.open(phantomDeepLink, "_blank");
    }
  </script>

</body>
</html>
